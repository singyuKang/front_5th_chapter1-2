## ê³¼ì œ ì²´í¬í¬ì¸íŠ¸
### ë°°í¬ ë§í¬

https://singyukang.github.io/front_5th_chapter1-2/

### ê¸°ë³¸ê³¼ì œ

#### ê°€ìƒë”ì„ ê¸°ë°˜ìœ¼ë¡œ ë Œë”ë§í•˜ê¸°

- [x] createVNode í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ vNodeë¥¼ ë§Œë“ ë‹¤.
- [x] normalizeVNode í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ vNodeë¥¼ ì •ê·œí™”í•œë‹¤.
- [x] createElement í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ vNodeë¥¼ ì‹¤ì œ DOMìœ¼ë¡œ ë§Œë“ ë‹¤.
- [x] ê²°ê³¼ì ìœ¼ë¡œ, JSXë¥¼ ì‹¤ì œ DOMìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì—ˆë‹¤.

#### ì´ë²¤íŠ¸ ìœ„ì„

- [x] ë…¸ë“œë¥¼ ìƒì„±í•  ë•Œ ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ ë“±ë¡í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ì´ë²¤íŠ¸ ìœ„ì„ ë°©ì‹ìœ¼ë¡œ ë“±ë¡í•´ì•¼ í•œë‹¤
- [x] ë™ì ìœ¼ë¡œ ì¶”ê°€ëœ ìš”ì†Œì—ë„ ì´ë²¤íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•´ì•¼ í•œë‹¤
- [x] ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì œê±°ë˜ë©´ ë” ì´ìƒ í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤

### ì‹¬í™” ê³¼ì œ

#### 1) Diff ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„

- [x] ì´ˆê¸° ë Œë”ë§ì´ ì˜¬ë°”ë¥´ê²Œ ìˆ˜í–‰ë˜ì–´ì•¼ í•œë‹¤
- [x] diff ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•´ì•¼ í•œë‹¤
- [x] ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê³  ë¶ˆí•„ìš”í•œ ìš”ì†Œë¥¼ ì œê±°í•´ì•¼ í•œë‹¤
- [x] ìš”ì†Œì˜ ì†ì„±ë§Œ ë³€ê²½ë˜ì—ˆì„ ë•Œ ìš”ì†Œë¥¼ ì¬ì‚¬ìš©í•´ì•¼ í•œë‹¤
- [x] ìš”ì†Œì˜ íƒ€ì…ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤

#### 2) í¬ìŠ¤íŠ¸ ì¶”ê°€/ì¢‹ì•„ìš” ê¸°ëŠ¥ êµ¬í˜„

- [x] ë¹„ì‚¬ìš©ìëŠ” í¬ìŠ¤íŠ¸ ì‘ì„± í¼ì´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤
- [x] ë¹„ì‚¬ìš©ìëŠ” í¬ìŠ¤íŠ¸ì— ì¢‹ì•„ìš”ë¥¼ í´ë¦­í•  ê²½ìš°, ê²½ê³  ë©”ì„¸ì§€ê°€ ë°œìƒí•œë‹¤.
- [x] ì‚¬ìš©ìëŠ” í¬ìŠ¤íŠ¸ ì‘ì„± í¼ì´ ë³´ì¸ë‹¤.
- [x] ì‚¬ìš©ìëŠ” í¬ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
- [x] ì‚¬ìš©ìëŠ” í¬ìŠ¤íŠ¸ì— ì¢‹ì•„ìš”ë¥¼ í´ë¦­í•  ê²½ìš°, ì¢‹ì•„ìš”ê°€ í† ê¸€ëœë‹¤.

## ê³¼ì œ ì…€í”„íšŒê³ 

`normalizeVNodeí•¨ìˆ˜`ë¥¼ í†µí•´ `VNode`ì˜ ì •ê·œí™”, `createElement`ì„ í†µí•´ DOM ìš”ì†Œ ìƒì„±, `eventManager`ì„ í†µí•´ ì´ë²¤íŠ¸ ë“±ë¡ê³¼ ì œê±°, `Diff ì•Œê³ ë¦¬ì¦˜`ì„ í†µí•´ ì´ì „ë…¸ë“œì™€ ìƒˆë¡œìš´ ë…¸ë“œ ë¹„êµí›„ ë°”ë€ ë¶€ë¶„ë§Œ ë Œë”ë§ ë“±ì„ `javascript`ë§Œì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í–ˆë‹¤ëŠ” ì ì´ ê¸°ì–µì— ë‚¨ê³ , `React`ì˜ ë Œë”ë§ ë°©ì‹ì— ëŒ€í•´ ì¡°ê¸ˆì´ë¼ë„ ê°€ê¹Œì›Œ ì§„ê±°ê°™ì•„ ë§Œì¡±ìŠ¤ëŸ¬ìš´ ê³¼ì œì˜€ìŠµë‹ˆë‹¤!

`normalizeVNode`, `createElement` êµ¬í˜„í• ë•Œ `ì¬ê·€í•¨ìˆ˜`ì— ëŒ€í•´ ì ìš©í•˜ëŠ” ë¶€ë¶„ì´ ì‹œê°„ì´ ê°€ì¥ ì˜¤ë˜ê±¸ë ¸ë˜ê²ƒê°™ê³ , `ì´ë²¤íŠ¸ ìœ„ì„`ì„ í•˜ëŠ” ì´ìœ , `ìë£Œêµ¬ì¡°`ì— ëŒ€í•œ ì„ íƒ, `ì´ë²¤íŠ¸ ë²„ë¸”ë§`, `ì´ë²¤íŠ¸ ìº¡ì³ë§`, `fragment` ì²˜ë¦¬ ë“± ë§ì€ ì‹œë„ë¥¼ í•´ë³´ì•˜ë˜ ê³¼ì œì¸ê±°ê°™ìŠµë‹ˆë‹¤.


## ê¸°ìˆ ì  ì„±ì¥ + ë‚´ìš©ì •ë¦¬ + ë¬¸ì œì  ì •ë¦¬ + ìƒˆë¡­ê²Œ ì‹œë„í•œì 

# **(1) `normalizeVNode` êµ¬í˜„ - JSX í•¨ìˆ˜ ì²˜ë¦¬ + ì¬ê·€ í•¨ìˆ˜ ì´í•´**
```javascript
export function normalizeVNode(vNode) {

  // 1. null, undefined, booleanì¸ ê²½ìš° ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
  if (vNode === null || vNode === undefined || typeof vNode === "boolean") {
    return "";
  }

  // 2. vNodeê°€ ë¬¸ìì—´ ë˜ëŠ” ìˆ«ìì¼ ê²½ìš° ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
  if (typeof vNode === "string" || typeof vNode === "number") {
    return String(vNode);
  }

  // 3. vNodeì˜ íƒ€ì…ì´ í•¨ìˆ˜ì¼ ê²½ìš° í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°˜í™˜ëœ ê²°ê³¼ë¥¼ ì¬ê·€ì ìœ¼ë¡œ í‘œì¤€í™”í•©ë‹ˆë‹¤. JSXí˜•íƒœ
  if (typeof vNode.type === "function") {
    const props = { ...vNode.props };
    if (vNode.children && vNode.children.length > 0) {
      props.children = vNode.children;
    }
    return normalizeVNode(vNode.type(props));
  }

  // 4. ê·¸ ì™¸ì˜ ê²½ìš°, vNodeì˜ ìì‹ ìš”ì†Œë“¤ì„ ì¬ê·€ì ìœ¼ë¡œ í‘œì¤€í™”í•˜ê³ , null ë˜ëŠ” undefined ê°’ì„ í•„í„°ë§í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
  if (Array.isArray(vNode.children)) {
    vNode.children = vNode.children
      .map(normalizeVNode)
      .filter(
        (value) =>
          value !== null &&
          value !== undefined &&
          value !== false &&
          value !== "",
      );
  }
  return vNode;
}
```
í•´ë‹¹ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ë©´ì„œ ê°€ì¥ ì–´ë ¤ì› ë˜ ë¶€ë¶„ì€ `í•¨ìˆ˜(vNode.type === "function")` ì— ëŒ€í•œ ì²˜ë¦¬ ë¶€ë¶„ê³¼  `vNode.children`ì„ ì¬ê·€ì ìœ¼ë¡œ í‘œì¤€í™”í•˜ëŠ” ë¶€ë¶„ì´ ì´í•´í•˜ëŠ”ë° ì˜¤ë˜ ê±¸ë ¸ë˜ê²ƒ ê°™ìŠµë‹ˆë‹¤.

`ì¬ê·€í•¨ìˆ˜`ë¥¼ ë³´ìë§ˆì ìƒê°ì´ ë‚¬ë˜ê²ƒì€ `DFSì•Œê³ ë¦¬ì¦˜`ì´ì—ˆìœ¼ë©°, ìë£Œë¥¼ ì°¾ì•„ë³´ë©° ì‘ë™ë°©ì‹ì„ ì°¨ê·¼ì°¨ê·¼ ë”°ë¼ê°€ ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ë•Œ ê³µí†µëœ ê·œì¹™ì´ ìˆì—ˆëŠ”ë° ì•„ë˜ ë‚´ìš©ì„ ë³´ë©´

`ê°€ì¥ ê¹Šì€ê³³ì„ ë§Œë‚¬ì„ë•Œì— ëŒ€í•œ ì²˜ë¦¬` , `ê°€ì¥ ì²˜ìŒ í•´ì¤˜ì•¼ í•˜ëŠ”ê²ƒ` ì— ì§‘ì¤‘ì„ í•˜ëŠ” ë¶€ë¶„ì´ì—ˆìŠµë‹ˆë‹¤.
```javascript
// ê°€ì¥ ê¹Šì€ê³³
  if (vNode === null || vNode === undefined || typeof vNode === "boolean") {
    return "";
  }
  if (typeof vNode === "string" || typeof vNode === "number") {
    return String(vNode);
  }
```
```javascript
 // ì²˜ìŒê³¼ ê·¸ ì™¸ì˜ ë¶€ë¶„
  if (typeof vNode.type === "function") {
    const props = { ...vNode.props };
    if (vNode.children && vNode.children.length > 0) {
      props.children = vNode.children;
    }
    return normalizeVNode(vNode.type(props));
  }

  if (Array.isArray(vNode.children)) {
    vNode.children = vNode.children
      .map(normalizeVNode)
      .filter(
        (value) =>
          value !== null &&
          value !== undefined &&
          value !== false &&
          value !== "",
      );
  }
```
ê°€ì¥ ë°‘ë°”ë‹¥ì¸ `vNode`ëŠ” ì›í•˜ëŠ” í˜•íƒœì˜ ë°ì´í„°ë¡œ ë³€í™˜í•´ì¤€ë’¤ ë°˜í™˜ì„ í•´ì£¼ê³ , ê°€ì¥ ì²˜ìŒ í•´ì¤˜ì•¼ í•˜ëŠ”ê²ƒì¸ `vNode.type`ì´ `í•¨ìˆ˜(JSX)`, `vNode`ê°€ ìì‹ì´ ìˆëŠ” ê²½ìš°ì— ëŒ€í•œ ì²˜ë¦¬ì— ì§‘ì¤‘í•˜ë©° êµ¬í˜„ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.

`í•¨ìˆ˜` ì¸ ê²½ìš°ì— í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í‘œì¤€í™”í•œë‹¤ â†’ ì´ ë¶€ë¶„ì„ ì´í•´í•˜ëŠ”ë° ì˜¤ë˜ ê±¸ë ¸ëŠ”ë° 
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 4 22 28](https://github.com/user-attachments/assets/99f913b0-3af5-4aed-a8ec-7de80a8bc1a8)
`renderElement(<Page />, $root)` ì„ ì‹¤í–‰ì‹œí‚¤ë©´ `<Page />` â†’ vNodeë¥¼
normalizeVNodeí•¨ìˆ˜ë¡œ ë°›ê²Œ ë˜ê³  JSXí˜•íƒœì—ì„œ vNode.type() ë¥¼ í†µí•´ ë‹¤ì‹œ normalizeVNodeë¡œ ë“¤ì–´ê°€ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ì€
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 4 23 34](https://github.com/user-attachments/assets/131ffd13-1a8d-4ae4-8177-62d62b4f7a16)
vNode.type() â†’ return (<div></div>) ë¥¼ ë°›ì•„ ìœ„ì˜ ì‚¬ì§„ì²˜ëŸ¼ createVNode í˜•íƒœê°€ ë˜ëŠ”ê²ƒì…ë‹ˆë‹¤.

`children` ì´ ìì‹ì´ ìˆëŠ”ê²½ìš°(Array)
vNode.children â†’ ëŠ” ê²°êµ­ Array í˜•íƒœë¡œ ë°˜í™˜ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ map í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆê³  ê° childrenìš”ì†Œ normalizeVNodeë¥¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ê²Œ ë˜ë©° ì›í•˜ëŠ” ëì˜ í˜•íƒœ â†’ â€œê°€ì¥ ê¹Šì€ê³³ì„ ë§Œë‚¬ì„ë•Œì˜ ì²˜ë¦¬â€ ë¥¼ ë°˜í™˜ë°›ê²Œ ë©ë‹ˆë‹¤. ëê¹Œì§€ ì‘ì—…ì´ ì™„ë£Œëœ vNode.childrenì„ ë‹¤ì‹œ í• ë‹¹ì„ í•´ì£¼ì–´ ê¸°ëŠ¥ì„ ë§ˆë¬´ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.
```javascript
vNode.children = vNode.children
      .map(normalizeVNode)
      .filter(
        (value) =>
          value !== null &&
          value !== undefined &&
          value !== false &&
          value !== "",
      );
```

# **(2)  `ì´ë²¤íŠ¸ ë“±ë¡ ìœ„ì„`ì„ í•˜ëŠ” ì´ìœ ê°€ ë­˜ê¹Œ?**

`button` `1000ê°œ`ì— `click` ì´ë²¤íŠ¸ë¥¼ `ê°ê°` ë“±ë¡ì„ í•œë‹¤ê³  ê°€ì •ì„ í•´ë³´ì
```javascript
// âŒ ê°œë³„ ìš”ì†Œì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•˜ëŠ” ê²½ìš°
document.querySelectorAll("button").forEach((button) => {
  button.addEventListener("click", () => console.log("ë²„íŠ¼ í´ë¦­!"));
});
```
ê·¸ë ‡ë‹¤ë©´ì€ `1000ê°œ`ì˜ ë²„íŠ¼ ëª¨ë‘ì˜ í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ì´ë˜ê³ , ìƒˆë¡œìš´ ë²„íŠ¼ì´ ì¶”ê°€ ë ë•Œë§ˆë‹¤ ê°œë³„ìš”ì†Œì— `addEventListener`ë¥¼ ì¶”ê°€ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ì€ `ë©”ëª¨ë¦¬ ë‚­ë¹„`ì™€ `ì•ˆì¢‹ì€ ì„±ëŠ¥`ì„ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤.
```javascript
// âœ… ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•œ ê²½ìš° (ë£¨íŠ¸ì—ì„œ í•œ ë²ˆë§Œ ë“±ë¡)
document.body.addEventListener("click", (event) => {
  if (event.target.tagName === "BUTTON") {
    console.log("ë²„íŠ¼ í´ë¦­!");
  }
});
```
ê·¸ë ‡ê¸° ë•Œë¬¸ì— `ê°œë³„ ìš”ì†Œ`ì— ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ ë¶™ì´ëŠ” ëŒ€ì‹ , `ìµœìƒìœ„ ì»¨í„°ì´ë„ˆ`ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡ì„í•˜ì—¬ `ëª¨ë“  í•˜ìœ„ ìš”ì†Œì˜ ì´ë²¤íŠ¸ë¥¼ í•œê³³ì—ì„œ ì²˜ë¦¬`í•˜ë„ë¡ í•˜ëŠ”ê²ƒì…ë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ì€ ë‹¨, `í•˜ë‚˜ì˜ ë¦¬ìŠ¤ë„ˆ`ë§Œìœ¼ë¡œ `1000ê°œ`ì˜ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì„±ëŠ¥ê³¼ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±ì´ ì¢‹ì•„ì§€ëŠ” ê²°ê³¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.


```javascript
    it("ì´ë²¤íŠ¸ê°€ ìœ„ì„ ë°©ì‹ìœ¼ë¡œ ë“±ë¡ë˜ì–´ì•¼ í•œë‹¤", () => {
      const clickHandler = vi.fn();
      const button = document.createElement("button");
      container.appendChild(button);

      addEvent(button, "click", clickHandler);
      setupEventListeners(container);
      button.click();

      expect(clickHandler).toHaveBeenCalledTimes(1);

      const handleClick = (e) => e.stopPropagation();
      button.addEventListener("click", handleClick);
      button.click();
      expect(clickHandler).toHaveBeenCalledTimes(1);

      expect(clickHandler).toHaveBeenCalledTimes(1);
      button.removeEventListener("click", handleClick);
      button.click();
      expect(clickHandler).toHaveBeenCalledTimes(2);
    });

   const handleClick = (e) => e.stopPropagation(); //ì´ë²¤íŠ¸ê°€ ë¶€ëª¨ë¡œ ì „íŒŒë˜ì§€ ì•Šë„ë¡ ì°¨ë‹¨.
   button.addEventListener("click", handleClick);
   button.click();
   expect(clickHandler).toHaveBeenCalledTimes(1);

```

ìœ„ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ `addEvent(button, "click", clickHandler)`ì„ í†µí•´ í•œë²ˆì˜ ì´ë²¤íŠ¸ ë“±ë¡í›„, `setupEventListeners()`ë¥¼ ì‹¤í–‰í•˜ì—¬ `ë¶€ëª¨ìš”ì†Œ`ì— ì´ë²¤íŠ¸ë¥¼ ìœ„ì„í•˜ë„ë¡ í•©ë‹ˆë‹¤.
ë§Œì•½ì— ìœ„ì„ ë°©ì‹ì´ ì•„ë‹Œ ê°ê° ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ì‹ì´ì—ˆë‹¤ë©´ ê°’ì€ `2íšŒ`ë¡œ í˜¸ì¶œì´ ë˜ì—ˆì„ ê²ƒ 

âœ… ê²°ë¡ : `ì´ë²¤íŠ¸ ìœ„ì„`ì´ íš¨ìœ¨ì ì´ë‹¤!

- ê°œë³„ ìš”ì†Œì— ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ ë¶™ì´ëŠ” ë°©ì‹ì€ ì„±ëŠ¥ ì €í•˜ ë° ë©”ëª¨ë¦¬ ë‚­ë¹„
- ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•˜ë©´ì€ í•œ ê³³ì—ì„œ ëª¨ë“  í•˜ìœ„ ìš”ì†Œì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ ê°€ëŠ¥!

# (3) ì´ë²¤íŠ¸ ë“±ë¡ ê³¼ì • ê·¸ë¦¼, ìë£Œêµ¬ì¡° ì„ íƒ
```
ğŸ“Œ ì´ë²¤íŠ¸ ë“±ë¡ ê³¼ì •
---------------------------------------------------
1. addEvent(button, "click", handleClick);
   
   eventMap:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   | button â†’ {       |
   |   "click" â†’ [handleClick] |
   | }                |
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
2. rootPreRegister("click");
   rootEventMap:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   | "click" â†’ null   | (ì´í›„ setupEventListeners ì‹¤í–‰ë¨)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. setupEventListeners(document.body);
   document.bodyì— "click" ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ë¨
---------------------------------------------------

ğŸ“Œ ì´ë²¤íŠ¸ ì‹¤í–‰ ê³¼ì • (ë²„íŠ¼ í´ë¦­ ì‹œ)
---------------------------------------------------
[ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­]
   â–¼
1. document.bodyì—ì„œ ë“±ë¡í•œ rootListener ì‹¤í–‰
   â–¼
2. event.targetì—ì„œ ì´ë²¤íŠ¸ ë²„ë¸”ë§ ì‹œì‘ (buttonë¶€í„° ìƒìœ„ ìš”ì†Œë¡œ ì´ë™)
   â–¼
3. buttonì˜ eventMapì—ì„œ "click" í•¸ë“¤ëŸ¬ í™•ì¸
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   | button â†’ {       |
   |   "click" â†’ [handleClick] |
   | }                |
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   - handleClick ì‹¤í–‰ë¨ (console.log ì¶œë ¥ë¨)
   â–¼
4. ë¶€ëª¨ ë…¸ë“œë¡œ ì´ë™í•˜ì—¬ ë°˜ë³µ (body â†’ document)
---------------------------------------------------
```
ì´ë²¤íŠ¸ êµ¬í˜„ ì‹œ ê¸°ì¡´ì—ëŠ” ê°ì²´ë¥¼ ë°°ì—´ í˜•íƒœë¡œ ì €ì¥í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ê´€ë¦¬í•˜ë ¤ê³  ì§„í–‰ì„ í–ˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¤‘ê°„ ê³¼ì •ì—ì„œ ë“±ë¡ì´ ì•ˆë˜ëŠ” ì˜¤ë¥˜ë¥¼ ë°œê²¬í•˜ì˜€ê³ , ë‹¤ë¥¸ë¶„ë“¤ì˜ ì½”ë“œë¥¼ í•œë²ˆ ë³´ê³  ì§„í–‰ì„ í•´ë³´ì í•˜ì—¬ ì½”ë“œë“¤ì„ ì‚´í´ë³´ì•˜ëŠ”ë° `Map Set`ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•œ ê²½ìš°ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. ì™œ `Map`ì„ ì„ íƒí–ˆëŠ”ì§€ ì¡°ì‚¬í•´ë³¸ ê²°ê³¼, `element`ëŠ” ë…ë¦½ì ì¸ ìœ ì¼í•œ ìš”ì†Œì´ë¯€ë¡œ í‚¤ê°’ìœ¼ë¡œ ì ì ˆí•˜ê²Œ í™œìš©í•  ìˆ˜ ìˆì—ˆìœ¼ë©°, ë°°ì—´ì˜ íƒìƒ‰ ì‹œê°„ì´ O(n)ì¸ ë°˜ë©´, `Map`ì€ O(1)ë¡œ ë” ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì ì ˆí•œ ìë£Œêµ¬ì¡°ì˜ ì„ íƒì˜ ì¤‘ìš”ì„±?! ì„ ë‹¤ì‹œ í•œë²ˆ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

# (4) `ì´ë²¤íŠ¸ ë²„ë¸”ë§` vs `ì´ë²¤íŠ¸ ìº¡ì³ë§`
```javascript
export function setupEventListeners(root) {
  rootEventMap.forEach((listener, eventType) => {
    if (listener) return;
    const rootListener = (event) => {
      let target = event.target;
      while (target) {
        const handlersMap = eventMap.get(target);
        if (handlersMap && handlersMap.has(event.type)) {
          handlersMap.get(event.type).forEach((handler) => handler(event));
        }
        if (target === event.currentTarget) break;
        target = target.parentNode;
      }
    };
    rootEventMap.set(eventType, rootListener);
    root.addEventListener(eventType, rootListener);
  });
}
```
ì´ë²ˆ ê³¼ì œëŠ” `ì´ë²¤íŠ¸ ë²„ë¸”ë§` êµ¬í˜„ìœ¼ë¡œ ì´ë²¤íŠ¸ ë°œìƒì‹œ `targetNode`ë¡œ ì ‘ê·¼í•˜ì—¬ í•˜ë‚˜í•˜ë‚˜ ìœ„ë¡œ ì˜¬ë¼ê°€ë©´ì„œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ë°©ì‹ì´ì—ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì €ëŠ” `ì œì¼ í•˜ë‹¨ì—ì„œ ìƒìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” ë°©ì‹ì´ ìˆë‹¤ë©´ì€ ê·¸ ë°˜ëŒ€ë„ ìˆì§€ ì•Šì„ê¹Œ?` í•˜ì—¬ ìë£Œë¥¼ ì°¾ì•„ë³´ê²Œ ë˜ì—ˆê³ , ì½”ì¹˜ë‹˜ì´ ì£¼ì‹  ë°œì œìë£Œë¥¼ ì‚´í´ë³´ë‹ˆ `ì´ë²¤íŠ¸ ë²„ë¸”ë§`ì— ë°˜ëŒ€ì¸ `ì´ë²¤íŠ¸ ìº¡ì³ë§` ë°©ì‹ì´ ìˆëŠ”ê²ƒì„ í™•ì¸í•˜ì—¬ ì´ë¥¼ êµ¬í˜„ì„ ì‹œì‘í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.

```javascript
export function setupEventListenersCapturing(root) {
  rootEventMap.forEach((listener, eventType) => {
    if (listener) return;

    const rootListener = (event) => {
      // ì´ë²¤íŠ¸ ë°œìƒ ìš”ì†Œë¶€í„° ì‹œì‘
      traverseDown(event.target, event);
    };

    rootEventMap.set(eventType, rootListener);
    root.addEventListener(eventType, rootListener);
  });
}

// í•˜ìœ„ ìš”ì†Œë¡œ ì´ë²¤íŠ¸ë¥¼ ì „íŒŒí•˜ëŠ” í•¨ìˆ˜
export function traverseDown(element, event) {
  // í˜„ì¬ ìš”ì†Œì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰
  const handlersMap = eventMap.get(element);
  if (handlersMap && handlersMap.has(event.type)) {
    handlersMap.get(event.type).forEach((handler) => handler(event));
  }

  // ìì‹ ìš”ì†Œë“¤ì— ëŒ€í•´ ì¬ê·€ì ìœ¼ë¡œ ì ìš©
  if (element.children && element.children.length > 0) {
    Array.from(element.children).forEach((child) => {
      traverseDown(child, event);
    });
  }
}
```
`ì´ë²¤íŠ¸ ë²„ë¸”ë§` ë°©ì‹ê³¼ ìœ ì‚¬í•˜ê²Œ `eventType` ì„ í†µí•´ ì´ë²¤íŠ¸ ì €ì¥, `root` ì— ì´ë²¤íŠ¸ë“±ë¡ì„ ì§„í–‰ì„ í•´ì¤ë‹ˆë‹¤.
 `ì´ë²¤íŠ¸ ë°œìƒì‹œ` `traverseDown` í•¨ìˆ˜ê°€ ì‹¤í–‰ì„ í•˜ê²Œ ë˜ê³  `Map` ì— ì €ì¥ë˜ì–´ ìˆëŠ” ì´ë²¤íŠ¸ â†’ ë°œìƒ
ê·¸í›„ í•´ë‹¹ìš”ì†Œì— ìì‹ìš”ì†Œë“¤ì´ ìˆë‹¤ë©´ì€ `ì¬ê·€ í•¨ìˆ˜`ë¥¼ í†µí•´ ê·¸ ìì‹ ìš”ì†Œê°€ ê°€ì§€ê³  ìˆëŠ” `ì´ë²¤íŠ¸` ë¥¼ ë°œìƒí•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.


```javascript
    it("ì´ë²¤íŠ¸ê°€ ìƒìœ„ ìš”ì†Œì—ì„œ í•˜ìœ„ ìš”ì†Œë¡œ ì „íŒŒë˜ì–´ì•¼ í•œë‹¤", () => {
      const parent = document.createElement("div");
      const child = document.createElement("div");
      const grandchild = document.createElement("button");

      parent.appendChild(child);
      child.appendChild(grandchild);
      container.appendChild(parent);

      // ê° ìš”ì†Œì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
      const parentHandler = vi.fn();
      const childHandler = vi.fn();
      const grandchildHandler = vi.fn();

      addEvent(parent, "click", parentHandler);
      addEvent(child, "click", childHandler);
      addEvent(grandchild, "click", grandchildHandler);

      // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
      setupEventListenersCapturing(container);

      // í…ŒìŠ¤íŠ¸ 1: ìµœìƒìœ„ ìš”ì†Œ(parent)ì— ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ë©´ ëª¨ë“  í•˜ìœ„ ìš”ì†Œë¡œ ì „íŒŒë˜ì–´ì•¼ í•¨
      const event1 = new MouseEvent("click");
      traverseDown(parent, event1);

      expect(parentHandler).toHaveBeenCalledTimes(1);
      expect(childHandler).toHaveBeenCalledTimes(1);
      expect(grandchildHandler).toHaveBeenCalledTimes(1);

      // ëª¨ë“  í˜¸ì¶œ ê¸°ë¡ ì´ˆê¸°í™”
      parentHandler.mockClear();
      childHandler.mockClear();
      grandchildHandler.mockClear();

      // í…ŒìŠ¤íŠ¸ 2: ì¤‘ê°„ ìš”ì†Œ(child)ì— ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ë©´ ìì‹ ê³¼ í•˜ìœ„ ìš”ì†Œë§Œ ì˜í–¥ì„ ë°›ì•„ì•¼ í•¨
      const event2 = new MouseEvent("click");
      traverseDown(child, event2);

      expect(parentHandler).toHaveBeenCalledTimes(0); // parentëŠ” í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•¨
      expect(childHandler).toHaveBeenCalledTimes(1); // childëŠ” í˜¸ì¶œë˜ì–´ì•¼ í•¨
      expect(grandchildHandler).toHaveBeenCalledTimes(1); // grandchildë„ í˜¸ì¶œë˜ì–´ì•¼ í•¨

      // ëª¨ë“  í˜¸ì¶œ ê¸°ë¡ ì´ˆê¸°í™”
      parentHandler.mockClear();
      childHandler.mockClear();
      grandchildHandler.mockClear();

      // í…ŒìŠ¤íŠ¸ 3: ìµœí•˜ìœ„ ìš”ì†Œ(grandchild)ì— ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ë©´ ìì‹ ë§Œ ì˜í–¥ì„ ë°›ì•„ì•¼ í•¨
      const event3 = new MouseEvent("click");
      traverseDown(grandchild, event3);

      expect(parentHandler).toHaveBeenCalledTimes(0); // parentëŠ” í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•¨
      expect(childHandler).toHaveBeenCalledTimes(0); // childë„ í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•¨
      expect(grandchildHandler).toHaveBeenCalledTimes(1); // grandchildë§Œ í˜¸ì¶œë˜ì–´ì•¼ í•¨
    });
  });
```
`ê°€ì¥ ìµœìƒìœ„ ìš”ì†Œ`ì—ì„œ `ê°€ì¥ ì•„ë˜ì¸ ìš”ì†Œ` ê¹Œì§€ `ì´ë²¤íŠ¸`ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸ì„ ìœ„í•´ ìœ„ì™€ ê°™ì€ `í…ŒìŠ¤íŠ¸ ì½”ë“œ`ë¥¼ ì‘ì„±í•˜ì˜€ê³  `3ê°€ì§€ ë°©ì‹`ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

1. `ë°©í–¥` ìƒê´€ì—†ì´ ë“±ë¡í•œ ì´ë²¤íŠ¸ê°€ `ì •ìƒì ìœ¼ë¡œ ì‘ë™`í•˜ë‹ˆ?
2. `ì¤‘ê°„ìš”ì†Œ`ì— ì´ë²¤íŠ¸ ë°œìƒì‹œ `ì•„ë˜ë°©í–¥ìœ¼ë¡œ ì´ë²¤íŠ¸ê°€ ë°œìƒ`í•˜ë‹ˆ?
3. `ê°€ì¥ ì•„ë˜ìˆëŠ” ì• `ê°€ ì´ë²¤íŠ¸ ë°œìƒì‹œ `ìì‹ ë§Œ ì´ë²¤íŠ¸`ê°€ ë°œìƒí•˜ë‹ˆ?

í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì„±ê³µì ìœ¼ë¡œ í†µê³¼ê°€ ë˜ì—ˆìœ¼ë©° ì•„ë˜ê¹Œì§€ ì´ë²¤íŠ¸ê°€ ì˜ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<img width="327" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 11 09 43" src="https://github.com/user-attachments/assets/8e037643-f771-4c0f-b32e-fc2cdaab525c" />


# (4) `fragment`ì²˜ë¦¬

ë©˜í† ë§ ì‹œê°„ì— ì½”ì¹˜ë‹˜ì´ AIê´€ë ¨ëœ ì§ˆë¬¸ì„ ë°›ì•˜ì—ˆëŠ”ë° AIë¥¼ í™œìš©í•˜ì—¬ `Reactì˜ fragment`ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•œë²ˆ í•´ë³´ë©´ ì¬ë°Œì§€ ì•Šê² ëƒ ë¼ê³  ë§ì”€í•˜ì…”ì„œ í•œë²ˆ í•´ë³¼ê¹Œ? í•˜ê³  ì§„í–‰ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 4 59 17](https://github.com/user-attachments/assets/432f9059-5ecd-4ec9-b936-432915976d77)
Fragment React ìë£Œ : https://react.dev/reference/react/Fragment
ì‹¤ì œë¡œ ReactëŠ” FragmentëŠ” ì‹¤ì œ DOMì— ì¶”ê°€í•˜ì§€ ì•Šê³  Fragmentì•ˆì— ìˆëŠ” ìì‹ ìš”ì†Œë“¤ë§Œ ìƒìœ„ ìš”ì†Œì— ì§ì ‘ ì—°ê²°í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤ê³  í•©ë‹ˆë‹¤.(ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ë˜ëŠ”ê²½ìš°ê°€ ìˆëŠ”ì§€ í™•ì¸ í•„ìš”)

ì—¬ê¸°ì„œ ì €ëŠ” createVNode ìƒì„±ì‹œ Fragmentíƒ€ì…ì„ ì„ ì–¸í•´ì£¼ê³  createElementì—ì„œ ê·¸ ì•ˆì— ìˆëŠ” ê°’ë“¤ë§Œ ì—°ê²°ì‹œì¼œì£¼ë©´ ë˜ì§€ ì•Šì„ê°€? ë¼ëŠ” ìƒê°ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.

JSX êµ¬ë¬¸(`<> <span>fragment</span> <p>ë¬¸ë‹¨</p> </>`)ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë°˜ë“œì‹œ íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬(Babel ë˜ëŠ” TypeScript)ê°€ í•„ìš”í•˜ë‹¤ê³  í•˜ì—¬ Babelì„¤ì •ì„ í•´ì£¼ëŠ” ë°©ì‹(JSX)ìœ¼ë¡œ êµ¬í˜„ì„ ì§„í–‰
* Babel ì„¤ì • í•„ìš” (@babel/plugin-transform-react-jsx)

```javascript
  // createVNode.js  
  // Fragment (<>...</>)ì„ ê°ì§€
  if (type === Fragment) {
    return children
      .flat(Infinity) //ì½”ì¹˜ë‹˜ ì¡°ì–¸ -> flat(Infinity) ì‚¬ìš©
      .filter(
        (child) => child !== false && child !== null && child !== undefined,
      );
  }


	
  // createElement.js
  // Fragment ì²˜ë¦¬ - typeì´ Fragmentì¼ ê²½ìš° DocumentFragmentë¥¼ ìƒì„±í•©ë‹ˆë‹¤
  if (vNode.type === Fragment) {
    const fragment = document.createDocumentFragment();
    if (vNode.children && Array.isArray(vNode.children)) {
      for (const child of vNode.children) {
        const childElement = createElement(child);
        fragment.appendChild(childElement);
      }
    }
    return fragment;
  }
```
`document.createDocumentFragment()`ì„ í†µí•´ `fragment ìƒì„±`í•œë’¤ `vNode ì˜ ìì‹ê°’`ì´ ìˆëŠ” ê²½ìš° `ì¬ê·€`ë¥¼ í†µí•´ ê°’ì„ ì²˜ë¦¬í•´ì¤€ë’¤ `fragment`ì— `append`í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.


```javascript
/** @jsxFrag Fragment */
import { createVNode, Fragment } from "../lib";

// ì‹¤ì‚¬ìš©
export const LoginPage = () => {
    <>
      <div className="bg-gray-100 flex items-center justify-center min-h-screen">
        <div className="bg-white p-8 rounded-lg shadow-md w-full max-w-md">
          <h1 className="text-2xl font-bold text-center text-blue-600 mb-8">
            í•­í•´í”ŒëŸ¬ìŠ¤
          </h1>
          <form id="login-form" onSubmit={handleSubmit}>
            <input
              type="text"
              id="username"
              placeholder="ì‚¬ìš©ì ì´ë¦„"
              className="w-full p-2 mb-4 border rounded"
              required
            />
            <input
              type="password"
              placeholder="ë¹„ë°€ë²ˆí˜¸"
              className="w-full p-2 mb-6 border rounded"
              required
            />
            <button
              type="submit"
              className="w-full bg-blue-600 text-white p-2 rounded"
            >
              ë¡œê·¸ì¸
            </button>
          </form>
          <div className="mt-4 text-center">
            <a href="#" className="text-blue-600 text-sm">
              ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?
            </a>
          </div>
          <hr className="my-6" />
          <div className="text-center">
            <button className="bg-green-500 text-white px-4 py-2 rounded">
              ìƒˆ ê³„ì • ë§Œë“¤ê¸°
            </button>
          </div>
        </div>
      </div>
    </>
}
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 5 08 36](https://github.com/user-attachments/assets/e589ec95-a115-45b8-93e9-b6cfef1c5537)
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 5 08 54](https://github.com/user-attachments/assets/0f3e8f33-4ed6-403f-bfb5-06990b042589)

ì‹¤ì œ `LoginPage`ì— `React`ì²˜ëŸ¼ `Fragment`ë¥¼ ì§‘ì–´ ë„£ì–´ë´¤ìœ¼ë©° ì‚¬ì§„ì„ í†µí•´ ì•Œë§ì€ ìš”ì†Œë¥¼ ë°˜í™˜í•´ ì£¼ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## `fragment`ì— ëŒ€í•œ `í…ŒìŠ¤íŠ¸ì½”ë“œ`
```javascript
    it("Fragment createVNode ìƒì„±", () => {
      const result = createVNode(
        Fragment,
        null,
        createVNode("span", null, "fragment"),
        createVNode("p", null, "ë¬¸ë‹¨"),
      );

      expect(result).toEqual([
        { type: "span", props: null, children: ["fragment"] },
        { type: "p", props: null, children: ["ë¬¸ë‹¨"] },
      ]);
    });
    
    it("fragment êµ¬ì¡°ë¥¼ ì²˜ë¦¬í•´ì•¼ í•œë‹¤. createElement Babelì´ìš©", () => {
      const result = createElement(
        <>
          <span>fragment</span>
          <p>ë¬¸ë‹¨</p>
        </>,
      );
      expect(result instanceof DocumentFragment).toBe(true);
      expect(result.childNodes.length).toBe(2);
      expect(result.childNodes[0].tagName).toBe("SPAN");
      expect(result.childNodes[0].textContent).toBe("fragment");
      expect(result.childNodes[1].tagName).toBe("P");
      expect(result.childNodes[1].textContent).toBe("ë¬¸ë‹¨");
    });
```
í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ `createVNode`, `createElement Babel`ì´ìš© í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì„±ì„ í•˜ì˜€ìœ¼ë©° 
`Fragment`ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<img width="361" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-04-03 á„‹á…©á„’á…® 11 10 30" src="https://github.com/user-attachments/assets/270bdfdf-df12-4fcd-8157-b92a33aaeb03" />


## ë¦¬ë·° ë°›ê³  ì‹¶ì€ ë‚´ìš©

 - `React`ëŠ” `Fragment`ëŠ” ì‹¤ì œ DOMì— ì¶”ê°€í•˜ì§€ ì•Šê³  `Fragmentì•ˆì— ìˆëŠ” ìì‹ ìš”ì†Œë“¤ë§Œ ìƒìœ„ ìš”ì†Œ`ì— ì§ì ‘ ì—°ê²°í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ëŠ”ë° `ë‹¤ë¥¸ ë°©ë²•`ìœ¼ë¡œ `Fragment`ë¥¼ ì²˜ë¦¬í•˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤!

- ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ `else` ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•ˆì¢‹ì•„í•˜ëŠ”ë°(`else`ë¥¼ ë„ˆë¬´ ë§ì´ ì¼ì„ë•Œ ê°€ë…ì„±ì´ ë„ˆë¬´ ì•ˆì¢‹ì€ ê¸°ì–µì´..)
ì•„ë˜ ì²˜ëŸ¼ ë¶„ê¸°ì²˜ë¦¬ íšŸìˆ˜ê°€ ì ì„ë•Œë§Œ ì²˜ë¦¬ê°€ ì‰¬ì› ì§€ë§Œ, ë” ë§ì€ ë¶„ê¸°ì—ì„œëŠ” `else`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë‚˜ì˜¬ê±°ê°™ì€ë° `elseì‚¬ìš© ë°©ë²•`ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•©ë‹ˆë‹¤
```javascript
    if (attr.startsWith("on")) {
      const eventType = attr.slice(2).toLowerCase();
      addEvent(target, eventType, value);
    }
    if (attr === "className") {
      target.setAttribute("class", value);
    }
    if (attr !== "className" && !attr.startsWith("on")) {
      target.setAttribute(attr, value);
    }
```

- ì´ë²ˆ ê³¼ì œì—ì„œëŠ” `ì—ëŸ¬ ì²˜ë¦¬`ì— ëŒ€í•œ ê´€ë¦¬ê°€ ì „í˜€ ë˜ì–´ìˆì§€ ì•ŠëŠ”ë°, `í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì—ëŸ¬ê´€ë¦¬`ë¥¼ ë³´í†µ ì–´ë–»ê²Œ ì§„í–‰í•˜ëŠ”ê²Œ ì¢‹ì„ê¹Œìš”? í•˜ë‚˜ì˜ ì—ëŸ¬íŒŒì¼ ë˜ëŠ” ë‹¤ìˆ˜ì˜ íŒŒì¼? `ì—ëŸ¬ê´€ë¦¬ê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤!`

> ReactëŠ” FragmentëŠ” ì‹¤ì œ DOMì— ì¶”ê°€í•˜ì§€ ì•Šê³  Fragmentì•ˆì— ìˆëŠ” ìì‹ ìš”ì†Œë“¤ë§Œ ìƒìœ„ ìš”ì†Œì— ì§ì ‘ ì—°ê²°í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ëŠ”ë° ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ Fragmentë¥¼ ì²˜ë¦¬í•˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤!

Fragment ì²˜ë¦¬ë¥¼ ìœ„í•œ ë‹¤ë¥¸ ë°©ë²•ë“¤ì„ ì†Œê°œí•´ë³¼ê²Œìš”!

1. DocumentFragment ë°©ì‹ - í˜„ì¬ ì‚¬ìš©í•˜ì‹  ì ‘ê·¼ë²•ì…ë‹ˆë‹¤. ì´ëŠ” ì›¹ í‘œì¤€ APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ì§ê´€ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤.

2. ë°°ì—´ ê¸°ë°˜ ì²˜ë¦¬ - ì¼ë¶€ ê°€ìƒ DOM êµ¬í˜„ì²´ëŠ” Fragmentë¥¼ ë‹¨ìˆœíˆ ìì‹ ë…¸ë“œì˜ ë°°ì—´ë¡œ í‘œí˜„í•˜ê³ , ë Œë”ë§ ì‹œ ì´ ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ ë¶€ëª¨ ìš”ì†Œì— ì§ì ‘ ì¶”ê°€í•©ë‹ˆë‹¤. ì‹¤ì œë¡œ React ë‚´ë¶€ì ìœ¼ë¡œëŠ” ì´ì™€ ìœ ì‚¬í•œ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

3. Fiber ë Œë”ëŸ¬ ìµœì í™” - Reactì˜ Fiber ì•„í‚¤í…ì²˜ì—ì„œëŠ” Fragmentê°€ ê²°êµ­ "íš¨ê³¼ ì—†ëŠ” ë…¸ë“œ"ë¡œ ìµœì í™”ë˜ì–´, ì‹¤ì œ DOM ì¡°ì‘ ë‹¨ê³„ì—ì„œ ê±´ë„ˆë›°ê²Œ ë©ë‹ˆë‹¤.

ì¢€ ë” ì‹¬í™”ëœ ì ‘ê·¼ ë°©ë²•ìœ¼ë¡œëŠ”, Fragmentë¥¼ "ê°€ìƒ ë§ˆì»¤"ë¡œ ì‚¬ìš©í•˜ì—¬ ë³µì¡í•œ ì¡°ê±´ë¶€ ë Œë”ë§ ìƒí™©ì—ì„œ í‚¤(key) ê´€ë¦¬ë¥¼ ë” íš¨ìœ¨ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” íŠ¹íˆ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ ìµœì í™”ì— ìœ ìš©í•©ë‹ˆë‹¤.


> ë¶„ê¸°ì²˜ë¦¬ íšŸìˆ˜ê°€ ì ì„ë•Œë§Œ ì²˜ë¦¬ê°€ ì‰¬ì› ì§€ë§Œ, ë” ë§ì€ ë¶„ê¸°ì—ì„œëŠ” elseë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë‚˜ì˜¬ê±°ê°™ì€ë° elseì‚¬ìš© ë°©ë²•ì— ëŒ€í•´ì„œ ê¶ê¸ˆí•©ë‹ˆë‹¤

ì œì¼ ë§ì´ ì“°ì´ëŠ” ë°©ë²•ì€ ì´ë ‡ê²Œ ê°ì²´ë¡œ ë§¤í•‘í•´ì„œ ì“°ëŠ” ê²Œ ì•„ë‹Œê°€ ì‹¶ì–´ìš” ã…ã… ì œê°€ ìì£¼ì“°ëŠ” ë°©ì‹ì´ê¸°ë„ í•©ë‹ˆë‹¤.

```javascript
const attributeHandlers = {
  className: (target, value) => target.setAttribute("class", value),
  event: (target, eventType, value) => addEvent(target, eventType, value),
  default: (target, attr, value) => target.setAttribute(attr, value)
};

function processAttribute(attr, value, target) {
  if (attr.startsWith("on")) {
    return attributeHandlers.event(target, attr.slice(2).toLowerCase(), value);
  }
  
  const handler = attributeHandlers[attr] || attributeHandlers.default;
  return handler(target, attr, value);
}
```

> ì´ë²ˆ ê³¼ì œì—ì„œëŠ” ì—ëŸ¬ ì²˜ë¦¬ì— ëŒ€í•œ ê´€ë¦¬ê°€ ì „í˜€ ë˜ì–´ìˆì§€ ì•ŠëŠ”ë°, í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ì—ëŸ¬ê´€ë¦¬ë¥¼ ë³´í†µ ì–´ë–»ê²Œ ì§„í–‰í•˜ëŠ”ê²Œ ì¢‹ì„ê¹Œìš”? í•˜ë‚˜ì˜ ì—ëŸ¬íŒŒì¼ ë˜ëŠ” ë‹¤ìˆ˜ì˜ íŒŒì¼? ì—ëŸ¬ê´€ë¦¬ê°€ ê¶ê¸ˆí•©ë‹ˆë‹¤!

í”„ë¡ íŠ¸ì—”ë“œì—ì„œì˜ íš¨ê³¼ì ì¸ ì—ëŸ¬ ê´€ë¦¬ ì „ëµì€ ì´ëŸ° ê²ƒë“¤ì´ ìˆì–´ìš”.

1. ì—ëŸ¬ ê²½ê³„(Error Boundaries): Reactì˜ ì—ëŸ¬ ê²½ê³„ì™€ ìœ ì‚¬í•œ ê°œë…ì„ êµ¬í˜„í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì˜ íŠ¹ì • ë¶€ë¶„ì—ì„œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ê°€ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¤‘ë‹¨ì‹œí‚¤ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.

2. ì¤‘ì•™í™”ëœ ì—ëŸ¬ ì²˜ë¦¬: ì—ëŸ¬ ìœ í˜•, ë©”ì‹œì§€, ì‹¬ê°ë„ ë“±ì„ ì²´ê³„ì ìœ¼ë¡œ ë¶„ë¥˜í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ì¤‘ì•™ ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ ë§Œë“¤ë©´ ì¢‹ìŠµë‹ˆë‹¤

```javascript
// errorHandler.js
export class AppError extends Error {
  constructor(code, message, severity = 'error') {
    super(message);
    this.code = code;
    this.severity = severity;
    this.timestamp = new Date();
  }
}

export const ErrorCodes = {
  NETWORK: 'ERR_NETWORK',
  VALIDATION: 'ERR_VALIDATION',
  RENDER: 'ERR_RENDER',
  // ...ê¸°íƒ€ ì—ëŸ¬ ì½”ë“œ
};

export function handleError(error, context = {}) {
  // ì—ëŸ¬ ë¡œê¹…
  console.error(`[${error.code || 'UNKNOWN'}]`, error.message, context);
  
  // ì‹¬ê°ë„ì— ë”°ë¥¸ ì²˜ë¦¬
  switch(error.severity) {
    case 'fatal':
      // ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µêµ¬ ë¶ˆê°€ ì²˜ë¦¬
      break;
    case 'error':
      // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
      showErrorNotification(error);
      break;
    case 'warning':
      // ê²½ê³ ë§Œ í‘œì‹œ
      break;
    default:
      // ê¸°ë³¸ ì²˜ë¦¬
  }
  
  // í•„ìš”ì‹œ ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡
  reportErrorToService(error, context);
}
```

3. ì—ëŸ¬ ê³„ì¸µí™”: ë„ë©”ì¸ë³„ ë˜ëŠ” ê¸°ëŠ¥ë³„ë¡œ ì—ëŸ¬ë¥¼ ê³„ì¸µí™”í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 - ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ (API í†µì‹ )
 - ë Œë”ë§ ì—ëŸ¬ (UI ì»´í¬ë„ŒíŠ¸)
 - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì—ëŸ¬ (ìƒíƒœ ê´€ë¦¬)
 - ì‚¬ìš©ì ì…ë ¥ ê²€ì¦ ì—ëŸ¬

4. ë¹„ë™ê¸° ì—ëŸ¬ ì²˜ë¦¬: Promise ì²´ì¸ê³¼ async/await êµ¬ë¬¸ì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì¼ê´€ë˜ê²Œ ê´€ë¦¬í•©ë‹ˆë‹¤.

5. ì „ì—­ ì—ëŸ¬ ìºì¹˜: `window.onerror` ë° `unhandledrejection` ì´ë²¤íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ë¥¼ í¬ì°©í•©ë‹ˆë‹¤.


